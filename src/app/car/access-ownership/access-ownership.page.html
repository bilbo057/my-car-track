<ion-content [fullscreen]="true">
  <div *ngIf="carDetails" class="car-details-mini">
    <div class="car-info-row">
      <span class="label">МПС:</span>
      <span class="value">{{ carDetails.Brand }} {{ carDetails.Model }}</span>
    </div>
    <div class="car-info-row">
      <span class="label">Рег. номер:</span>
      <span class="value">{{ carDetails.License_plate }}</span>
    </div>
  </div>

  <div class="ownership-actions">
    <ion-button expand="block" shape="round" class="add-btn" (click)="showAddUserPopup()">Добави потребител</ion-button>
    <ion-button expand="block" shape="round" color="danger" class="danger-btn" (click)="transferOwnership()">Прехвърли собствеността</ion-button>
  </div>

  <ng-container *ngFor="let user of carUsers">
  <ion-card class="custom-item" *ngIf="carDetails && user.UserID !== carDetails.UserID">
    <ion-card-header>
      <ion-card-title class="section-title">{{ user.username }}</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p class="centered-email"><strong>Email:</strong> {{ user.email }}</p>
      <ion-button color="danger" expand="full" shape="round" (click)="removeUserAccess(user.id)">
        ПРЕМАХНИ ДОСТЪПА
      </ion-button>
    </ion-card-content>
  </ion-card>
</ng-container>

  <ion-spinner *ngIf="loadingUsers" name="crescent" style="display:block;margin:2rem auto;"></ion-spinner>
</ion-content>
