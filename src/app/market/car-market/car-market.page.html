<ion-content [fullscreen]="true">
  <div class="section-title">Филтрирай офертите</div>

  <!-- Filters Form -->
  <form (ngSubmit)="applyFilters()">
    <!-- Brand -->
    <ion-item>
      <ion-label>Марка</ion-label>
      <ion-select [(ngModel)]="selectedBrand" name="Brand" (ionChange)="updateModels()">
        <ion-select-option *ngFor="let brand of brands" [value]="brand">{{ brand }}</ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Model -->
    <ion-item>
      <ion-label>Модел</ion-label>
      <ion-select [(ngModel)]="selectedModel" name="Model">
        <ion-select-option *ngFor="let model of models" [value]="model">{{ model }}</ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Year -->
    <ion-item>
      <ion-label>Мин. година</ion-label>
      <ion-input type="number" [(ngModel)]="minYear" name="MinYear"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Макс. година</ion-label>
      <ion-input type="number" [(ngModel)]="maxYear" name="MaxYear"></ion-input>
    </ion-item>

    <!-- Price -->
    <ion-item>
      <ion-label>Мин. цена</ion-label>
      <ion-input type="number" [(ngModel)]="minPrice" name="MinPrice"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Макс. цена</ion-label>
      <ion-input type="number" [(ngModel)]="maxPrice" name="MaxPrice"></ion-input>
    </ion-item>

    <!-- KM -->
    <ion-item>
      <ion-label>Мин. км</ion-label>
      <ion-input type="number" [(ngModel)]="minKM" name="MinKM"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Макс. км</ion-label>
      <ion-input type="number" [(ngModel)]="maxKM" name="MaxKM"></ion-input>
    </ion-item>

    <!-- Volume -->
    <ion-item>
      <ion-label>Мин. обем (cc)</ion-label>
      <ion-input type="number" [(ngModel)]="minVolume" name="MinVolume"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Макс. обем (cc)</ion-label>
      <ion-input type="number" [(ngModel)]="maxVolume" name="MaxVolume"></ion-input>
    </ion-item>

    <!-- Power -->
    <ion-item>
      <ion-label>Мин. мощност</ion-label>
      <ion-input type="number" [(ngModel)]="minPower" name="MinPower"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Макс. мощност</ion-label>
      <ion-input type="number" [(ngModel)]="maxPower" name="MaxPower"></ion-input>
    </ion-item>

    <!-- Color -->
    <ion-item>
      <ion-label>Цвят</ion-label>
      <ion-select [(ngModel)]="selectedColor" name="Color">
        <ion-select-option *ngFor="let color of colors" [value]="color">{{ color }}</ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Euro -->
    <ion-item>
      <ion-label>Евро стандарт</ion-label>
      <ion-select [(ngModel)]="selectedEuro" name="Euro">
        <ion-select-option *ngFor="let euro of euroStandards" [value]="euro">{{ euro }}</ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Drive -->
    <ion-item>
      <ion-label>Задвижване</ion-label>
      <ion-select [(ngModel)]="selectedDrive" name="Drive">
        <ion-select-option *ngFor="let drive of driveTypes" [value]="drive">{{ drive }}</ion-select-option>
      </ion-select>
    </ion-item>

    <!-- Submit -->
    <ion-button expand="full" type="submit" shape="round" class="add-car-btn">
      Потърси
    </ion-button>
  </form>

  <div class="section-title">Намерени оферти</div>

  <!-- Car Offers -->
  <ion-card *ngFor="let offer of filteredOffers" class="offer-item" (click)="viewOfferDetails(offer.offerId)">
    <ion-card-content class="offer-content">
      <!-- Car Info (Left) -->
      <div class="offer-details">
        <h3 class="offer-title">{{ offer.Brand }} {{ offer.Model }}</h3>
        <p><strong>Година:</strong> {{ offer.Year }}</p>
        <p><strong>Километраж:</strong> {{ offer.Current_KM }} км</p>
        <p><strong>Цена:</strong> {{ offer.Price_of_selling }} лв.</p>
      </div>

      <!-- Car Image (Right) -->
      <img
        [src]="offer.photoUrl || '/assets/img/default-car.png'"
        alt="Car Image"
        class="offer-thumbnail"
      />
    </ion-card-content>
  </ion-card>
</ion-content>
