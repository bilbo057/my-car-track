<!-- chat-list.page.html -->
<ion-content>
  <ion-searchbar [(ngModel)]="searchQuery" (ionInput)="searchUsers()" placeholder="Search users..."></ion-searchbar>

  <ion-list *ngIf="searchResults.length > 0">
    <ion-item *ngFor="let user of searchResults" (click)="startChat(user)">
      <ion-label>{{ user.username }}</ion-label>
    </ion-item>
  </ion-list>

  <!-- List of Existing Chats -->
  <ion-list>
    <ion-item *ngFor="let chat of chats" (click)="openChat(chat.id)">
      <ion-label>
        <h2>{{ chat.otherUser }}</h2>
        <p>{{ chat.lastMessage }}</p>
      </ion-label>
      <ion-note>{{ chat.lastMessageTimestamp?.toDate() | date: 'short' }}</ion-note>
    </ion-item>
  </ion-list>
</ion-content>